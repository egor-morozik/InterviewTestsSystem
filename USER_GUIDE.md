# Руководство пользователя - Interview Tests System

## Описание платформы

Платформа для проведения интервью и тестирования кандидатов с поддержкой:
- **Автоматических тестов** (HR) - кандидаты проходят тесты самостоятельно
- **Технических интервью** (Tech Lead) - real-time взаимодействие через WebSocket с совместным редактированием кода

---

## Для HR и Tech Lead

### Вход в систему

1. Откройте админ-панель: `http://localhost/admin/`
2. Войдите с учетными данными (создайте суперпользователя если нужно)

### Создание суперпользователя

```bash
cd backend
python manage.py createsuperuser
```

### Создание пользователей

В админке Django:
- **Users** → **Interviewer users** → **Add**
- Укажите username, email, password
- Отметьте `is_hr` для HR или `is_tech_lead` для Tech Lead

### Создание тестового шаблона

1. **Interviewer interface** → **Test templates** → **Add**
2. Заполните:
   - Название теста
   - Описание
   - Ограничение по времени (в минутах, 0 = без ограничения)
3. Добавьте вопросы через вкладку **Test template questions**

### Создание вопросов

1. **Interviewer interface** → **Questions** → **Add**
2. Типы вопросов:
   - **Свободный текст** - кандидат вводит текст
   - **Выбор одного варианта** - один правильный ответ
   - **Выбор нескольких вариантов** - несколько правильных ответов
   - **Написать код** - кандидат пишет код (Python 3)
3. Для вопросов с кодом:
   - Укажите правильный ответ (ожидаемый вывод)
   - Укажите входные данные (stdin) если нужны
4. Добавьте варианты ответов для single/multiple choice

### Создание кандидата

1. **Candidate interface** → **Candidates** → **Add**
2. Укажите email и ФИО

### Создание приглашения

1. **Candidate interface** → **Invitations** → **Add**
2. Выберите:
   - Кандидата
   - Шаблон теста
   - Тип интервью:
     - **Общий тест (HR)** - автоматический тест
     - **Техническое собеседование (Tech Lead)** - real-time интервью
3. Для технического интервью укажите **Назначенный Tech Lead**
4. Отметьте "Отправить приглашение сразу" для автоматической отправки email
5. Сохраните - будет создана уникальная ссылка

### Просмотр результатов

1. **Candidate interface** → **Invitations**
2. Выберите приглашение
3. Просмотрите:
   - Статус (отправлено/завершено)
   - Общий балл
   - Количество переключений вкладок
   - Ответы кандидата
4. Для технических интервью Tech Lead может:
   - Добавить комментарии по каждому вопросу
   - Выставить баллы
   - Написать итоговый комментарий

---

## Для кандидатов

### Прохождение теста

1. Откройте ссылку из email приглашения
2. Ссылка имеет формат: `http://localhost/test/{unique-link}`
3. Начните прохождение теста

### Типы вопросов

#### Текстовый вопрос
- Введите ответ в текстовое поле

#### Выбор одного варианта
- Выберите один вариант ответа

#### Выбор нескольких вариантов
- Выберите все правильные варианты

#### Написание кода
- Напишите код на Python 3
- Код будет автоматически проверен при завершении теста
- Учитываются входные данные (stdin) если указаны

### Завершение теста

- Нажмите "Завершить тест" в любой момент
- Или дождитесь окончания времени (если установлено ограничение)
- После завершения результаты сохраняются автоматически

### Техническое интервью

1. Откройте ссылку: `http://localhost/interview/{unique-link}`
2. Tech Lead и кандидат видят одну страницу в реальном времени
3. Возможности:
   - Совместное редактирование кода
   - Чат в реальном времени
   - Запуск кода с выводом результатов
   - Tech Lead может исправлять код кандидата

---

## Особенности

### Автоматическая оценка

- **Текстовые вопросы**: точное совпадение с правильным ответом
- **Выбор вариантов**: проверка выбранных вариантов
- **Код**: выполнение через Judge0 API и сравнение вывода

### Отслеживание активности

- Система отслеживает переключения вкладок (tab switches)
- Логируются уходы и возвраты на вкладку теста

### Ограничение времени

- Можно установить лимит времени на тест
- Таймер отображается в интерфейсе
- Тест завершается автоматически при истечении времени

---

## API Endpoints

### Для кандидатов

- `GET /api/candidate/test/{uuid}/session/` - Получить сессию теста
- `GET /api/candidate/test/{uuid}/question/{id}/` - Получить вопрос
- `POST /api/candidate/test/{uuid}/question/{id}/answer/` - Отправить ответ
- `POST /api/candidate/test/{uuid}/finish/` - Завершить тест
- `POST /api/candidate/log-switch/{uuid}/` - Логировать переключение вкладки

### Для интервьюеров

- `GET /api/interviewer/templates/` - Список шаблонов
- `GET /api/interviewer/templates/{id}/` - Детали шаблона
- `GET /api/candidate/session/{uuid}/` - Сессия интервью (для Tech Lead)

### WebSocket

- `ws://localhost/ws/interview/{uuid}/` - Техническое интервью в реальном времени

---

## Структура данных

### Типы интервью

- **general** - Общий тест (HR)
- **technical** - Техническое собеседование (Tech Lead)

### Типы вопросов

- **text** - Свободный текст
- **single_choice** - Выбор одного варианта
- **multiple_choice** - Выбор нескольких вариантов
- **code** - Написание кода

### Сложность вопросов

- **easy** - Легко
- **medium** - Средне
- **hard** - Сложно

---

## Примеры использования

### Создание простого теста

1. Создайте шаблон "Python Basics"
2. Добавьте вопросы:
   - Текстовый: "Что такое переменная?"
   - Single choice: "Какой тип данных у числа 42?"
   - Code: "Напишите функцию sum(a, b)"
3. Создайте кандидата
4. Создайте приглашение с типом "Общий тест"
5. Отправьте ссылку кандидату

### Проведение технического интервью

1. Создайте шаблон с вопросами по коду
2. Создайте приглашение с типом "Техническое собеседование"
3. Назначьте Tech Lead
4. Отправьте ссылку кандидату
5. Tech Lead открывает ту же ссылку
6. Проводите интервью в реальном времени

---

## Поддержка

При возникновении проблем:
1. Проверьте логи: `docker-compose logs`
2. Убедитесь, что все сервисы запущены
3. Проверьте настройки email для отправки приглашений
4. Для технических интервью убедитесь, что WebSocket работает
